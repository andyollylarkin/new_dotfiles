make --dry-run --always-make --keep-going --print-directory
make: Entering directory '/home/denis/Desktop/mind-agent'
echo "Building linux"
make build
 
make[1]: Entering directory '/home/denis/Desktop/mind-agent'
go build -ldflags "-w -s -linkmode 'external' -extldflags '-static'"  -o ./cmd/mind_agent ./cmd/main.go
make[1]: Leaving directory '/home/denis/Desktop/mind-agent'
echo "Building windows"
make build-win
 
make[1]: Entering directory '/home/denis/Desktop/mind-agent'
 
echo ":: Building mind-agent in MinGW container..."
docker run --rm -it \
	-u "${UID}:${GID}" \
	-e GOCACHE=/go/.cache \
	-v "/home/denis/go/src":/go/src \
	-v "/home/denis/go/pkg":/go/pkg \
	-v "/home/denis/Desktop/mind-agent":/go/work \
	-w /go/work \
	x1unix/go-mingw:latest \
	/bin/sh -c 'go build -ldflags "-w -s -linkmode 'external' -extldflags '-static'" -buildvcs=false -o ./cmd/windows/mind_agent.exe ./cmd/main.go'
make[1]: Leaving directory '/home/denis/Desktop/mind-agent'
 
echo "Building windows service"
make build-service
 
make[1]: Entering directory '/home/denis/Desktop/mind-agent'
 
echo ":: Building mind-agent in MinGW container..."
docker run --rm -it \
	-u "${UID}:${GID}" \
	-e GOCACHE=/go/.cache \
	-v "/home/denis/go/src":/go/src \
	-v "/home/denis/go/pkg":/go/pkg \
	-v "/home/denis/Desktop/mind-agent":/go/work \
	-w /go/work \
	x1unix/go-mingw:latest \
	/bin/sh -c 'go build -ldflags "-w -s -linkmode 'external' -extldflags '-static'" -buildvcs=false -o ./cmd/windows/mind_agent_service.exe ./cmd/windows/mind_agent_service.go'
make[1]: Leaving directory '/home/denis/Desktop/mind-agent'
 
echo "Building installers"
make build-installer
 
make[1]: Entering directory '/home/denis/Desktop/mind-agent'
echo "Building installers"
make build -C installer
 
make[2]: Entering directory '/home/denis/Desktop/mind-agent/installer'
GOOS=linux go build -ldflags "-w -s -linkmode 'external' -extldflags '-static'" -buildvcs=false -o agent_installer ./main.go
GOOS=windows go build -ldflags='-s' -o agent_installer.exe ./main.go
make[2]: Leaving directory '/home/denis/Desktop/mind-agent/installer'
 
make[1]: Leaving directory '/home/denis/Desktop/mind-agent'
 
make: Leaving directory '/home/denis/Desktop/mind-agent'
 
